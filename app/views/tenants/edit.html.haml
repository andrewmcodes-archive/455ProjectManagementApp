%script{:language => "JavaScript"}
  Stripe.setPublishableKey("#{ENV['STRIPE_TEST_PUBLISHABLE_KEY']}");
.row
  .col-md-6.offset-md-3
    .card
      .card-header
        %h1= t '.Edit plan'
      .card-body
        .card-text
          = form_for @tenant, url: update_plan_path, html: { class: "#{class_name_for_tenant_form(@tenant)}" } do |f|
            .form-group.col-md-12
              = f.label :name, 'Organization'
              %span.description (Unique name for your group or organization for the new account)
              = f.text_field :name, required: true, class: "form-control"
            .form-group.col-md-12
              = f.label :plan
              = f.select :plan, options_for_select(Plan.options, @tenant.plan ), {}, required: true, class: "form-control"
            - if @tenant.payment.blank? || @tenant.payment
              = fields_for( :payment ) do |p|
                .form-group.col-md-12
                  = p.label :card_number, "Card Number", data: { stripe: 'label' }
                  = p.text_field :card_number, class: "form-control", required: true, data: { stripe: 'number' }
                  = p.label :card_cvv, "Card CVV", data: { stripe: 'label' }
                  = p.text_field :card_cvv, class: "form-control", required: true, data: { stripe: 'cvv' }
                  = p.label :card_expires, "Card Expires", data: { stripe: 'label' }
                  = p.select :card_expires_month, options_for_select(Payment.month_options), { include_blank: 'Month' }, "data-stripe" => "exp-month", class: "form-control", required: true
                  = p.select :card_expires_year, options_for_select(Payment.year_options.push), { include_blank: 'Year' }, class: "form-control", data: { stripe: "exp-year"}, required: true
            = f.submit 'Update Plan', class: "btn btn-primary", id: 'update_plan'
